/* Berry Blending Styles - Compact & Consistent */
.berry-blending {
  max-width: 1200px;
  margin: 0 auto;
  padding: 1rem;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
  line-height: 1.5;
  --berry-accent: #d66020;
  --berry-accent-strong: #a84810;
}

.berry-header h2 {
  margin: 0;
  font-size: 1.5rem;
  font-weight: 700;
  color: #2d2d2d;
  letter-spacing: -0.01em;
}

.berry-header p {
  margin: 0.25rem 0 1rem 0;
  color: #424242;
  font-size: 0.9rem;
}

/* Mode Selector */
.berry-mode-selector {
  display: flex;
  gap: 0.5rem;
  margin-bottom: 0;
  padding: 0.75rem;
  background: #f4d03f;
  border-radius: 12px 12px 0 0;
  border: 2px solid #d66020;
  border-bottom: none;
  flex-wrap: nowrap;
  align-items: center;
  justify-content: center;
  overflow-x: auto;
}

.berry-mode-selector button,
.berry-mode-selector a {
  padding: 0.5rem 1rem;
  background: #fffbf5;
  border: 2px solid #8b6914;
  border-radius: 8px;
  cursor: pointer;
  font-size: 0.85rem;
  font-weight: 500;
  color: #2d2d2d;
  transition: all 0.2s;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
  text-decoration: none;
  display: inline-block;
  text-align: center;
  white-space: nowrap;
  flex-shrink: 0;
}

.berry-mode-selector .nav-arrow {
  background: transparent;
  border: none;
  color: #5a8cc8;
  padding: 0.25rem;
  width: 48px;
  height: 48px;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: none;
  cursor: pointer;
  transition: all 0.2s;
}

.berry-mode-selector .nav-arrow:hover {
  color: #4278b0;
  transform: scale(1.05);
}

.berry-mode-selector .nav-arrow:active {
  transform: scale(0.95);
}

.berry-mode-selector button:hover:not(.active),
.berry-mode-selector a:hover:not(.active) {
  background: #fff;
  box-shadow: 0 3px 6px rgba(0, 0, 0, 0.2);
  border-color: #b8461a;
  transform: translateY(-2px);
}

.berry-mode-selector button.active,
.berry-mode-selector a.active {
  background: #fff;
  color: #0b0b0b;
  border-color: #d66020;
  border-width: 3px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2), inset 0 1px 2px rgba(255, 255, 255, 0.5);
  font-weight: 700;
}

.berry-mode-content {
  padding: 1.5rem;
  background:
    repeating-linear-gradient(
      to bottom,
      transparent 0px,
      transparent 8px,
      rgba(214, 96, 32, 0.04) 8px,
      rgba(214, 96, 32, 0.04) 9px
    ),
    linear-gradient(135deg, #fff8e1 0%, #fffaf0 100%);
  border: 2px solid #d66020;
  border-top: none;
  border-radius: 0 0 12px 12px;
  box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.05);
}

/* Cards and Messages */
.berry-blending .hint {
  color: #424242;
  font-style: italic;
  margin: 0.75rem 0;
  font-size: 0.9rem;
  padding: 0.75rem;
  background: #fff7e8;
  border-left: 3px solid #d66020;
  border-radius: 10px;
  text-align: center;
}

.berry-coming-card {
  background: #fff7e8;
  padding: 1.25rem;
  border-radius: 10px;
  border: 2px solid #d66020;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
  text-align: center;
}

.berry-coming-card h3 {
  margin: 0 0 0.5rem 0;
  font-size: 1.1rem;
  font-weight: 700;
  color: #d66020;
}

.berry-coming-card p {
  margin: 0;
  color: #424242;
  font-size: 0.9rem;
}

/* RSE Blending */
.rse-blending h3 {
  margin: -1.5rem -1.5rem 0 -1.5rem;
  font-size: 0.95rem;
  font-weight: 700;
  color: #fff;
  background:
    linear-gradient(
      to bottom,
      transparent 0px,
      transparent 20px,
      rgba(214, 96, 32, 0.5) 20px,
      rgba(214, 96, 32, 0.5) 24px,
      transparent 24px,
      transparent 28px,
      rgba(214, 96, 32, 0.5) 28px,
      rgba(214, 96, 32, 0.5) 32px,
      transparent 32px,
      transparent 36px,
      rgba(214, 96, 32, 0.5) 36px,
      rgba(214, 96, 32, 0.5) 40px,
      transparent 40px,
      transparent 44px,
      rgba(214, 96, 32, 0.5) 44px,
      rgba(214, 96, 32, 0.5) 48px,
      transparent 48px,
      transparent 100%
    ),
    #f4d03f;
  border: none;
  border-bottom: 2px solid #d66020;
  padding: 0.5rem 1rem;
  letter-spacing: 0.02em;
  text-align: center;
}

.rse-blending h3 > span {
  display: inline-block;
  background:
    linear-gradient(to right,
      rgba(0, 0, 0, 0.3) 0%,
      rgba(0, 0, 0, 0) 8%,
      rgba(0, 0, 0, 0) 92%,
      rgba(0, 0, 0, 0.3) 100%),
    linear-gradient(135deg, #e8793e 0%, #d86830 50%, #c05528 100%);
  border: 3px solid #6b2f0a;
  border-radius: 12px;
  padding: 0.5rem 1rem;
  text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.6);
  box-shadow:
    inset 0 2px 3px rgba(255, 255, 255, 0.15),
    inset 0 -2px 3px rgba(0, 0, 0, 0.4),
    0 2px 4px rgba(0, 0, 0, 0.2);
  max-width: 100%;
  overflow-wrap: break-word;
}

.rse-blending .blending-options {
  margin-top: 0.75rem;
}

.rse-blending .kit-blocks {
  display: flex;
  flex-direction: column;
  gap: 0;
}

.rse-blending .block-item {
  display: grid;
  grid-template-columns: 1.5rem minmax(150px, 230px) repeat(4, minmax(90px, 1fr)) auto;
  grid-template-areas: "players header berries berries berries berries rpm";
  align-items: center;
  column-gap: 0.5rem;
  row-gap: 0.2rem;
  border: none;
  border-bottom: 1px solid #e0d0c0;
  border-radius: 0;
  background: transparent;
  box-shadow: none;
  padding: 0.4rem 0.5rem 0.4rem 2.5rem;
}

.rse-blending .block-item:last-child {
  border-bottom: none;
}

.rse-blending .block-players {
  grid-area: players;
  margin-left: -2rem;
  width: 1.5rem;
  font-size: 0.8rem;
  font-weight: 700;
  color: #757575;
  white-space: nowrap;
}

.rse-blending .block-header {
  grid-area: header;
  display: flex;
  align-items: center;
  gap: 0.35rem;
}

.rse-blending .block-name {
  font-size: 0.9rem;
  font-weight: 600;
  color: #424242;
  word-break: break-word;
}

.rse-blending .block-berry-grid {
  grid-area: berries;
  display: grid;
  grid-template-columns: repeat(4, minmax(90px, 1fr));
  column-gap: 0.5rem;
}

.rse-blending .block-berry {
  font-size: 0.8rem;
  color: #757575;
  white-space: nowrap;
}

.rse-blending .block-rpm {
  grid-area: rpm;
  font-size: 0.85rem;
  font-weight: 600;
  color: #757575;
  white-space: nowrap;
  justify-self: end;
}

/* DPPt Blending */
.dppt-blending h3 {
  margin: -1.5rem -1.5rem 0 -1.5rem;
  font-size: 0.95rem;
  font-weight: 700;
  color: #fff;
  background:
    linear-gradient(
      to bottom,
      transparent 0px,
      transparent 20px,
      rgba(214, 96, 32, 0.5) 20px,
      rgba(214, 96, 32, 0.5) 24px,
      transparent 24px,
      transparent 28px,
      rgba(214, 96, 32, 0.5) 28px,
      rgba(214, 96, 32, 0.5) 32px,
      transparent 32px,
      transparent 36px,
      rgba(214, 96, 32, 0.5) 36px,
      rgba(214, 96, 32, 0.5) 40px,
      transparent 40px,
      transparent 44px,
      rgba(214, 96, 32, 0.5) 44px,
      rgba(214, 96, 32, 0.5) 48px,
      transparent 48px,
      transparent 100%
    ),
    #f4d03f;
  border: none;
  border-bottom: 2px solid #d66020;
  padding: 0.5rem 1rem;
  letter-spacing: 0.02em;
  text-align: center;
}

.dppt-blending h3 > span {
  display: inline-block;
  background:
    linear-gradient(to right,
      rgba(0, 0, 0, 0.3) 0%,
      rgba(0, 0, 0, 0) 8%,
      rgba(0, 0, 0, 0) 92%,
      rgba(0, 0, 0, 0.3) 100%),
    linear-gradient(135deg, #e8793e 0%, #d86830 50%, #c05528 100%);
  border: 3px solid #6b2f0a;
  border-radius: 12px;
  padding: 0.5rem 1rem;
  text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.6);
  box-shadow:
    inset 0 2px 3px rgba(255, 255, 255, 0.15),
    inset 0 -2px 3px rgba(0, 0, 0, 0.4),
    0 2px 4px rgba(0, 0, 0, 0.2);
  max-width: 100%;
  overflow-wrap: break-word;
}

.dppt-blending .blending-options {
  margin-top: 0.75rem;
}

.dppt-blending .kit-blocks {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(135px, 1fr));
  gap: 0.75rem;
}

/* BDSP Blending */
.bdsp-blending h3 {
  margin: -1.5rem -1.5rem 0 -1.5rem;
  font-size: 0.95rem;
  font-weight: 700;
  color: #fff;
  background:
    linear-gradient(
      to bottom,
      transparent 0px,
      transparent 20px,
      rgba(214, 96, 32, 0.5) 20px,
      rgba(214, 96, 32, 0.5) 24px,
      transparent 24px,
      transparent 28px,
      rgba(214, 96, 32, 0.5) 28px,
      rgba(214, 96, 32, 0.5) 32px,
      transparent 32px,
      transparent 36px,
      rgba(214, 96, 32, 0.5) 36px,
      rgba(214, 96, 32, 0.5) 40px,
      transparent 40px,
      transparent 44px,
      rgba(214, 96, 32, 0.5) 44px,
      rgba(214, 96, 32, 0.5) 48px,
      transparent 48px,
      transparent 100%
    ),
    #f4d03f;
  border: none;
  border-bottom: 2px solid #d66020;
  padding: 0.5rem 1rem;
  letter-spacing: 0.02em;
  text-align: center;
}

.bdsp-blending h3 > span {
  display: inline-block;
  background:
    linear-gradient(to right,
      rgba(0, 0, 0, 0.3) 0%,
      rgba(0, 0, 0, 0) 8%,
      rgba(0, 0, 0, 0) 92%,
      rgba(0, 0, 0, 0.3) 100%),
    linear-gradient(135deg, #e8793e 0%, #d86830 50%, #c05528 100%);
  border: 3px solid #6b2f0a;
  border-radius: 12px;
  padding: 0.5rem 1rem;
  text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.6);
  box-shadow:
    inset 0 2px 3px rgba(255, 255, 255, 0.15),
    inset 0 -2px 3px rgba(0, 0, 0, 0.4),
    0 2px 4px rgba(0, 0, 0, 0.2);
  max-width: 100%;
  overflow-wrap: break-word;
}

.bdsp-blending .blending-options {
  margin-top: 0.75rem;
}

.blending-options {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
  margin-bottom: 1rem;
  padding: 1rem;
  background: #fff7e8;
  border-radius: 10px;
  border: 2px solid #d66020;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
}

.option-row {
  display: flex;
  align-items: stretch;
  gap: 1rem;
  flex-wrap: nowrap;
}

.option-row:has(.option-checkbox) {
  flex-wrap: wrap;
}

.option-group {
  display: flex;
  flex-direction: column;
  gap: 0.4rem;
}

.option-group.inline {
  flex-direction: row;
  align-items: center;
  gap: 0.6rem;
}

.option-group label {
  font-weight: 600;
  color: #212121;
  font-size: 0.85rem;
  white-space: nowrap;
}

.option-group select {
  padding: 0.5rem 2.5rem 0.5rem 0.75rem;
  border: 3px solid #d66020;
  border-radius: 8px;
  font-size: 0.85rem;
  font-weight: 500;
  background-color: #fffbf5;
  background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23d66020' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
  background-repeat: no-repeat;
  background-position: right 0.75rem center;
  background-size: 1em;
  color: #0b0b0b;
  cursor: pointer;
  min-width: 160px;
  transition: all 0.2s;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2), inset 0 1px 2px rgba(255, 255, 255, 0.5);
  appearance: none;
}

.option-group select:hover {
  box-shadow: 0 3px 6px rgba(0, 0, 0, 0.25), inset 0 1px 2px rgba(255, 255, 255, 0.5);
  transform: translateY(-1px);
}

.option-group select:focus {
  outline: none;
  border-color: #d66020;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2), inset 0 1px 2px rgba(255, 255, 255, 0.5), 0 0 0 2px rgba(214, 96, 32, 0.25);
}

/* Player Buttons */
.player-buttons {
  display: flex;
  gap: 0.4rem;
}

.player-buttons button {
  padding: 0.4rem 0.75rem;
  background: #fff7e8;
  border: 1px solid rgba(214, 96, 32, 0.5);
  border-radius: 8px;
  cursor: pointer;
  font-size: 0.85rem;
  font-weight: 600;
  color: #6f6b78;
  transition: all 0.2s;
  min-width: 42px;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}

.player-buttons button:hover:not(.active) {
  background: #fffdf7;
  box-shadow: 0 3px 6px rgba(0, 0, 0, 0.15);
  transform: translateY(-2px);
}

.player-buttons button.active {
  background: #fffbf5;
  color: #0b0b0b;
  border-color: #d66020;
  border-width: 3px;
  box-shadow:
    0 2px 4px rgba(0, 0, 0, 0.2),
    inset 0 1px 2px rgba(255, 255, 255, 0.5),
    0 0 0 2px rgba(214, 96, 32, 0.25);
}

/* Option Checkboxes */
.option-checkbox {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  gap: 0.35rem;
  cursor: pointer;
  padding: 0.45rem 0.6rem;
  background: #fff7e8;
  border-radius: 12px;
  border: 1px solid rgba(214, 96, 32, 0.5);
  transition: all 0.2s;
  flex: 1 1 calc(30% - 0.7rem);
  max-width: calc(50% - 0.5rem);
  min-width: calc(30% - 0.7rem);
  min-height: 46px;
  position: relative;
}

.option-checkbox:hover {
  background: #fffdf7;
  box-shadow: 0 3px 6px rgba(0, 0, 0, 0.15);
  transform: translateY(-1px);
}

.option-checkbox:has(input:checked) {
  background: #fffbf5;
  border-color: var(--berry-accent);
  border-width: 3px;
  box-shadow:
    0 2px 5px rgba(0, 0, 0, 0.18),
    inset 0 1px 1px rgba(255, 255, 255, 0.5),
    0 0 0 2px rgba(214, 96, 32, 0.25);
}

.option-checkbox:has(input:checked):hover {
  background: #fff9f0;
  border-color: #d66020;
  border-width: 3px;
  box-shadow:
    0 3px 6px rgba(0, 0, 0, 0.16),
    0 0 0 2px rgba(214, 96, 32, 0.35);
}

.option-checkbox input[type="checkbox"] {
  position: absolute;
  inset: 0;
  opacity: 0;
  cursor: pointer;
}

.option-checkbox .toggle-track {
  display: flex;
  align-items: center;
  justify-content: center;
  min-width: 28px;
  min-height: 28px;
  padding: 0;
  margin: 0;
  border: none;
  background: transparent;
  box-shadow: none;
  flex-shrink: 0;
  align-self: center;
}

.option-checkbox .toggle-check {
  font-size: 0.95rem;
  font-weight: 800;
  line-height: 1;
  color: #0b0b0b;
}

.option-checkbox .toggle-label {
  font-size: 0.9rem;
  color: #6f6b78;
  font-weight: 500;
  line-height: 1.3;
  word-wrap: break-word;
  overflow-wrap: break-word;
  width: 100%;
}

.option-checkbox:has(input:checked) .toggle-label {
  color: #2d2d2d;
  font-weight: 700;
}

/* Berry Kit Display */
.berry-kit {
  background: #fff7e8;
  padding: 1rem;
  border-radius: 10px;
  border: 2px solid #d66020;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
}

.berry-kit h4 {
  margin: 0 0 0.75rem 0;
  font-size: 1rem;
  font-weight: 700;
  color: #d66020;
}

.kit-blocks {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
  gap: 0.75rem;
  margin-bottom: 0.75rem;
}

.block-item {
  padding: 0.5rem;
  background: #fffbf5;
  border: 2px solid #d66020;
  border-radius: 10px;
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.04);
}

.block-header {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.berry-icon {
  width: 32px;
  height: 32px;
  object-fit: contain;
  flex-shrink: 0;
  image-rendering: pixelated;
}

.block-name {
  font-size: 0.85rem;
  font-weight: 700;
  color: #d66020;
  line-height: 1.2;
  flex: 1;
}

.block-berry {
  font-size: 0.8rem;
  font-weight: 500;
  color: #424242;
  line-height: 1.3;
}

.block-meta {
  font-size: 0.8rem;
  font-weight: 600;
  color: #757575;
  text-align: center;
}

.kit-stats {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  padding-top: 0.5rem;
  border-top: 1px solid #e0e0e0;
}

.stat-row {
  display: flex;
  align-items: center;
  gap: 0.35rem;
  font-size: 0.85rem;
  color: #000;
  flex-wrap: wrap;
  min-width: 0;
}

.stat-label {
  font-weight: 600;
  color: #212121;
  white-space: nowrap;
}

.stats {
  display: flex;
  flex-wrap: wrap;
  gap: 0.3rem;
  flex: 1;
  overflow-x: auto;
  padding-bottom: 0.15rem;
}

.stat {
  padding: 0.2rem 0.45rem;
  background: #f0f0f0;
  border-radius: 3px;
  font-size: 0.78rem;
  border: 1px solid #ddd;
  white-space: nowrap;
}

.stat.spicy { background: #ffe0e0; color: #c62828; }
.stat.dry { background: #e0f2ff; color: #0277bd; }
.stat.sweet { background: #fce4ec; color: #c2185b; }
.stat.bitter { background: #e8f5e9; color: #2e7d32; }
.stat.sour { background: #fff9c4; color: #f57f17; }
.stat.sheen { background: #e8ebff; color: #1e3a8a; border-color: #c7d2fe; }

.berry-blending .no-results {
  color: #424242;
  font-style: italic;
  margin: 0.75rem 0;
  font-size: 0.9rem;
  padding: 0.75rem;
  background: #fff7e8;
  border-left: 3px solid #d66020;
  border-radius: 10px;
  text-align: center;
}

/* Responsive */
@media (max-width: 900px) {
  .berry-blending {
    padding: 0.5rem;
  }

  /* Keep mode selector in a row on tablets */
  .berry-mode-selector {
    padding: 0.75rem 0.5rem;
  }

  .berry-mode-selector .nav-arrow {
    display: none;
  }

  .berry-mode-selector button,
  .berry-mode-selector a {
    padding: 0.45rem 0.85rem;
    font-size: 0.8rem;
  }

  .option-row {
    flex-wrap: wrap;
    gap: 0.5rem;
  }

  .option-row:has(.option-checkbox) {
    flex-direction: row;
  }

  .option-checkbox {
    flex: 1 1 calc(30% - 0.7rem);
    max-width: calc(50% - 0.5rem);
    min-width: calc(30% - 0.7rem);
  }

  .option-group.inline {
    flex-direction: column;
    align-items: stretch;
  }

  .option-group select {
    width: 100%;
    min-width: auto;
    font-size: 0.8rem;
    padding: 0.45rem 1.75rem 0.45rem 0.65rem;
  }

  .rse-blending .block-item {
    grid-template-columns: 1.5rem 1fr auto;
    grid-template-areas:
      "players header rpm"
      "players berries berries";
    align-items: start;
  }

  .rse-blending .block-berry-grid {
    display: flex;
    flex-wrap: wrap;
    gap: 0.4rem;
    width: 100%;
  }

  .rse-blending .block-rpm {
    align-self: start;
  }

  .rse-blending .block-berry {
    min-width: 105px;
  }

  .kit-blocks {
    grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
  }

  .color-mapping-list {
    grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
  }

  .dppt-blending .kit-blocks {
    grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
  }

  .bdsp-set-items {
    grid-template-columns: repeat(auto-fit, minmax(105px, 1fr));
  }

  .kit-stats {
    gap: 0.5rem;
  }
}

@media (max-width: 600px) {
  .berry-blending {
    padding: 0;
  }

  .berry-mode-content {
    padding: 1rem;
  }

  /* Keep mode selector in a row on small phones */
  .berry-mode-selector {
    gap: 0.3rem;
    padding: 0.5rem;
  }

  .berry-mode-selector button,
  .berry-mode-selector a {
    font-size: 0.75rem;
    padding: 0.4rem 0.65rem;
  }

  /* Make headers smaller on small screens */
  .rse-blending h3,
  .dppt-blending h3,
  .oras-blending h3,
  .bdsp-blending h3 {
    font-size: 0.75rem;
    padding: 0.35rem 0.5rem;
    margin: -1rem -1rem 0 -1rem;
  }

  .rse-blending h3 > span,
  .dppt-blending h3 > span,
  .oras-blending h3 > span,
  .bdsp-blending h3 > span {
    padding: 0.35rem 0.6rem;
    border-width: 2px;
  }

  .blending-options {
    padding: 0.75rem;
    gap: 0.6rem;
  }

  .option-group label {
    font-size: 0.8rem;
  }

  .option-group select {
    font-size: 0.75rem;
    padding: 0.4rem 1.5rem 0.4rem 0.6rem;
  }

  .player-buttons button {
    font-size: 0.8rem;
    padding: 0.35rem 0.65rem;
    min-width: 38px;
  }

  .option-checkbox {
    padding: 0.4rem 0.5rem;
    min-height: 42px;
    flex: 1 1 calc(30% - 0.7rem);
    max-width: calc(50% - 0.5rem);
    min-width: calc(30% - 0.7rem);
  }

  .option-checkbox .toggle-label {
    font-size: 0.85rem;
  }

  .kit-blocks {
    grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
  }

  .color-mapping-list {
    grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
  }

  .bdsp-set-items {
    gap: 0.5rem;
  }

  .block-item {
    padding: 0.4rem;
    gap: 0.35rem;
  }

  .berry-icon {
    width: 28px;
    height: 28px;
  }

  .block-name {
    font-size: 0.8rem;
  }

  .block-berry {
    font-size: 0.75rem;
  }

  .block-meta {
    font-size: 0.75rem;
  }

  .stat-row {
    font-size: 0.8rem;
  }

  .stat {
    font-size: 0.75rem;
    padding: 0.15rem 0.4rem;
  }

  .color-mapping-list {
    max-width: 100%;
  }

  .color-mapping-item {
    gap: 0.75rem;
    padding: 0.5rem 0.6rem;
  }

  .color-label {
    font-size: 0.85rem;
    min-width: 70px;
    padding: 0.25rem 0.6rem;
  }

  .flavor-label,
  .stat-label-name {
    font-size: 0.85rem;
  }

  .bdsp-set-group-wrapper {
    flex-direction: column;
    gap: 0.5rem;
  }

  .bdsp-set-label {
    font-size: 0.75rem;
    padding: 0.4rem 0.6rem;
    min-width: auto;
    width: 100%;
    text-align: center;
  }

  .dppt-blending .kit-blocks {
    grid-template-columns: repeat(auto-fit, minmax(110px, 1fr));
    gap: 0.5rem;
  }

  .bdsp-set-items {
    grid-template-columns: repeat(auto-fit, minmax(95px, 1fr));
    gap: 0.4rem;
  }
}

@media (max-width: 400px) {
  .berry-mode-selector button,
  .berry-mode-selector a {
    font-size: 0.7rem;
    padding: 0.35rem 0.5rem;
  }

  /* Make headers even smaller on very small screens */
  .rse-blending h3,
  .dppt-blending h3,
  .oras-blending h3,
  .bdsp-blending h3 {
    font-size: 0.7rem;
    padding: 0.3rem 0.4rem;
  }

  .rse-blending h3 > span,
  .dppt-blending h3 > span,
  .oras-blending h3 > span,
  .bdsp-blending h3 > span {
    padding: 0.3rem 0.5rem;
    border-width: 2px;
  }

  .player-buttons {
    flex-wrap: wrap;
  }

  .player-buttons button {
    font-size: 0.75rem;
    min-width: 35px;
  }

  .color-mapping-item {
    gap: 0.4rem;
    padding: 0.4rem 0.5rem;
  }

  .color-label {
    font-size: 0.75rem;
    min-width: 50px;
    padding: 0.2rem 0.5rem;
  }

  .flavor-label,
  .stat-label-name {
    font-size: 0.75rem;
  }

  .rse-blending .kit-blocks,
  .dppt-blending .kit-blocks {
    grid-template-columns: repeat(auto-fit, minmax(90px, 1fr));
  }

  .bdsp-set-items {
    grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
  }
}

/* Focus styles for accessibility */
.berry-mode-selector button:focus-visible,
.berry-mode-selector a:focus-visible,
.berry-blending .player-buttons button:focus-visible,
.berry-blending .option-checkbox input:focus-visible,
.berry-blending select:focus-visible {
  outline: 3px solid #d66020;
  outline-offset: 2px;
}

/* ORAS Color Mapping */
.oras-blending h3 {
  margin: -1.5rem -1.5rem 0 -1.5rem;
  font-size: 0.95rem;
  font-weight: 700;
  color: #fff;
  background:
    linear-gradient(
      to bottom,
      transparent 0px,
      transparent 20px,
      rgba(214, 96, 32, 0.5) 20px,
      rgba(214, 96, 32, 0.5) 24px,
      transparent 24px,
      transparent 28px,
      rgba(214, 96, 32, 0.5) 28px,
      rgba(214, 96, 32, 0.5) 32px,
      transparent 32px,
      transparent 36px,
      rgba(214, 96, 32, 0.5) 36px,
      rgba(214, 96, 32, 0.5) 40px,
      transparent 40px,
      transparent 44px,
      rgba(214, 96, 32, 0.5) 44px,
      rgba(214, 96, 32, 0.5) 48px,
      transparent 48px,
      transparent 100%
    ),
    #f4d03f;
  border: none;
  border-bottom: 2px solid #d66020;
  padding: 0.5rem 1rem;
  letter-spacing: 0.02em;
  text-align: center;
}

.oras-blending h3 > span {
  display: inline-block;
  background:
    linear-gradient(to right,
      rgba(0, 0, 0, 0.3) 0%,
      rgba(0, 0, 0, 0) 8%,
      rgba(0, 0, 0, 0) 92%,
      rgba(0, 0, 0, 0.3) 100%),
    linear-gradient(135deg, #e8793e 0%, #d86830 50%, #c05528 100%);
  border: 3px solid #6b2f0a;
  border-radius: 12px;
  padding: 0.5rem 1rem;
  text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.6);
  box-shadow:
    inset 0 2px 3px rgba(255, 255, 255, 0.15),
    inset 0 -2px 3px rgba(0, 0, 0, 0.4),
    0 2px 4px rgba(0, 0, 0, 0.2);
  max-width: 100%;
  overflow-wrap: break-word;
}

.oras-blending .oras-info-card {
  margin-top: 0.75rem;
}

.oras-info-card {
  background: #fff7e8;
  padding: 1rem;
  border-radius: 10px;
  border: 2px solid #d66020;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
}

.oras-info-card p {
  color: #424242;
  font-size: 0.9rem;
  line-height: 1.5;
  margin: 0 0 1rem 0;
}

.oras-info-card p:last-child {
  margin-bottom: 0;
}

.color-mapping-list {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
  gap: 0.75rem;
  margin: 0 auto 1rem auto;
}

.color-mapping-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.5rem;
  padding: 0.75rem;
  background: #fffbf5;
  border-radius: 10px;
  border: 2px solid #d66020;
  text-align: center;
}

.color-label {
  font-weight: 700;
  font-size: 0.85rem;
  padding: 0.35rem 0.75rem;
  border-radius: 3px;
  width: 100%;
  text-align: center;
}

.color-label.spicy {
  background: #ffe0e0;
  color: #c62828;
  border: 1px solid #c62828;
}

.color-label.dry {
  background: #e0f2ff;
  color: #0277bd;
  border: 1px solid #0277bd;
}

.color-label.sweet {
  background: #fce4ec;
  color: #c2185b;
  border: 1px solid #c2185b;
}

.color-label.bitter {
  background: #e8f5e9;
  color: #2e7d32;
  border: 1px solid #2e7d32;
}

.color-label.sour {
  background: #fff9c4;
  color: #f57f17;
  border: 1px solid #f57f17;
}

.flavor-label {
  font-size: 0.85rem;
  color: #424242;
  font-weight: 500;
  text-align: center;
}

.stat-label-name {
  font-size: 0.85rem;
  color: #212121;
  font-weight: 600;
  text-align: center;
}

/* BDSP Poffin Groups */
.bdsp-kit-blocks {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
  grid-template-columns: none;
  margin-bottom: 0.75rem;
}

.bdsp-kit-blocks .bdsp-set-group-wrapper {
  width: 100%;
  margin-bottom: 0;
}

.bdsp-set-group-wrapper {
  display: flex;
  align-items: stretch;
  gap: 0.75rem;
  margin-bottom: 0.75rem;
}

.bdsp-set-label {
  display: flex;
  align-items: center;
  justify-content: center;
  background: #d66020;
  color: #fff;
  font-weight: 700;
  font-size: 0.9rem;
  padding: 0.75rem 1rem;
  border-radius: 8px;
  white-space: nowrap;
  min-width: 80px;
  flex-shrink: 0;
}

.bdsp-set-items {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
  gap: 0.75rem;
  width: 100%;
}
