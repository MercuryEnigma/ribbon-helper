/* Berry Blending Styles - Compact & Consistent */
.berry-blending {
  max-width: 1200px;
  margin: 0 auto;
  padding: 1rem;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
  line-height: 1.5;
  --berry-accent: #d66020;
  --berry-accent-strong: #a84810;
}

.berry-header h2 {
  margin: 0;
  font-size: 1.5rem;
  font-weight: 700;
  color: #2d2d2d;
  letter-spacing: -0.01em;
}

.berry-header p {
  margin: 0.25rem 0 1rem 0;
  color: #424242;
  font-size: 0.9rem;
}

/* Mode Selector */
.berry-mode-selector {
  display: flex;
  gap: 0.5rem;
  margin-bottom: 0;
  padding: 0.75rem;
  background: #f4d03f;
  border-radius: 12px 12px 0 0;
  border: 2px solid #d66020;
  border-bottom: none;
  flex-wrap: wrap;
  align-items: center;
  justify-content: center;
}

.berry-mode-selector button {
  padding: 0.5rem 1rem;
  background: #fffbf5;
  border: 2px solid #8b6914;
  border-radius: 8px;
  cursor: pointer;
  font-size: 0.85rem;
  font-weight: 700;
  color: #2d2d2d;
  transition: all 0.2s;
  text-transform: uppercase;
  letter-spacing: 0.3px;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}

.berry-mode-selector .nav-arrow {
  background: transparent;
  border: none;
  color: #5a8cc8;
  padding: 0.25rem;
  width: 48px;
  height: 48px;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: none;
  cursor: pointer;
  transition: all 0.2s;
}

.berry-mode-selector .nav-arrow:hover {
  color: #4278b0;
  transform: scale(1.05);
}

.berry-mode-selector .nav-arrow:active {
  transform: scale(0.95);
}

.berry-mode-selector button:hover:not(.active) {
  background: #fff;
  box-shadow: 0 3px 6px rgba(0, 0, 0, 0.2);
  border-color: #b8461a;
  transform: translateY(-2px);
}

.berry-mode-selector button.active {
  background: #fff;
  color: #d66020;
  border-color: #d66020;
  border-width: 3px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2), inset 0 1px 2px rgba(255, 255, 255, 0.5);
}

.berry-mode-content {
  padding: 1.5rem;
  background:
    repeating-linear-gradient(
      to bottom,
      transparent 0px,
      transparent 8px,
      rgba(214, 96, 32, 0.04) 8px,
      rgba(214, 96, 32, 0.04) 9px
    ),
    linear-gradient(135deg, #fff8e1 0%, #fffaf0 100%);
  border: 2px solid #d66020;
  border-top: none;
  border-radius: 0 0 12px 12px;
  box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.05);
}

/* Cards and Messages */
.berry-blending .hint {
  color: #424242;
  font-style: italic;
  margin: 0.75rem 0;
  font-size: 0.9rem;
  padding: 0.75rem;
  background: #fff7e8;
  border-left: 3px solid #d66020;
  border-radius: 10px;
  text-align: center;
}

.berry-coming-card {
  background: #fff7e8;
  padding: 1.25rem;
  border-radius: 10px;
  border: 2px solid #d66020;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
  text-align: center;
}

.berry-coming-card h3 {
  margin: 0 0 0.5rem 0;
  font-size: 1.1rem;
  font-weight: 700;
  color: #d66020;
}

.berry-coming-card p {
  margin: 0;
  color: #424242;
  font-size: 0.9rem;
}

/* RSE Blending */
.rse-blending h3 {
  margin: -1.5rem -1.5rem 0 -1.5rem;
  font-size: 1.1rem;
  font-weight: 700;
  color: #fff;
  background:
    linear-gradient(
      to bottom,
      transparent 0px,
      transparent 20px,
      rgba(214, 96, 32, 0.5) 20px,
      rgba(214, 96, 32, 0.5) 24px,
      transparent 24px,
      transparent 28px,
      rgba(214, 96, 32, 0.5) 28px,
      rgba(214, 96, 32, 0.5) 32px,
      transparent 32px,
      transparent 36px,
      rgba(214, 96, 32, 0.5) 36px,
      rgba(214, 96, 32, 0.5) 40px,
      transparent 40px,
      transparent 44px,
      rgba(214, 96, 32, 0.5) 44px,
      rgba(214, 96, 32, 0.5) 48px,
      transparent 48px,
      transparent 100%
    ),
    #f4d03f;
  border: none;
  border-bottom: 2px solid #d66020;
  padding: 0.6rem 1.5rem;
  letter-spacing: 0.02em;
  text-align: center;
}

.rse-blending h3 > span {
  display: inline-block;
  background:
    linear-gradient(to right,
      rgba(0, 0, 0, 0.3) 0%,
      rgba(0, 0, 0, 0) 8%,
      rgba(0, 0, 0, 0) 92%,
      rgba(0, 0, 0, 0.3) 100%),
    linear-gradient(135deg, #e8793e 0%, #d86830 50%, #c05528 100%);
  border: 3px solid #6b2f0a;
  border-radius: 12px;
  padding: 0.6rem 1.5rem;
  text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.6);
  box-shadow:
    inset 0 2px 3px rgba(255, 255, 255, 0.15),
    inset 0 -2px 3px rgba(0, 0, 0, 0.4),
    0 2px 4px rgba(0, 0, 0, 0.2);
}

.rse-blending .blending-options {
  margin-top: 0.75rem;
}

/* DPPt Blending */
.dppt-blending h3 {
  margin: -1.5rem -1.5rem 0 -1.5rem;
  font-size: 1.1rem;
  font-weight: 700;
  color: #fff;
  background:
    linear-gradient(
      to bottom,
      transparent 0px,
      transparent 20px,
      rgba(214, 96, 32, 0.5) 20px,
      rgba(214, 96, 32, 0.5) 24px,
      transparent 24px,
      transparent 28px,
      rgba(214, 96, 32, 0.5) 28px,
      rgba(214, 96, 32, 0.5) 32px,
      transparent 32px,
      transparent 36px,
      rgba(214, 96, 32, 0.5) 36px,
      rgba(214, 96, 32, 0.5) 40px,
      transparent 40px,
      transparent 44px,
      rgba(214, 96, 32, 0.5) 44px,
      rgba(214, 96, 32, 0.5) 48px,
      transparent 48px,
      transparent 100%
    ),
    #f4d03f;
  border: none;
  border-bottom: 2px solid #d66020;
  padding: 0.6rem 1.5rem;
  letter-spacing: 0.02em;
  text-align: center;
}

.dppt-blending h3 > span {
  display: inline-block;
  background:
    linear-gradient(to right,
      rgba(0, 0, 0, 0.3) 0%,
      rgba(0, 0, 0, 0) 8%,
      rgba(0, 0, 0, 0) 92%,
      rgba(0, 0, 0, 0.3) 100%),
    linear-gradient(135deg, #e8793e 0%, #d86830 50%, #c05528 100%);
  border: 3px solid #6b2f0a;
  border-radius: 12px;
  padding: 0.6rem 1.5rem;
  text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.6);
  box-shadow:
    inset 0 2px 3px rgba(255, 255, 255, 0.15),
    inset 0 -2px 3px rgba(0, 0, 0, 0.4),
    0 2px 4px rgba(0, 0, 0, 0.2);
}

.dppt-blending .blending-options {
  margin-top: 0.75rem;
}

/* BDSP Blending */
.bdsp-blending h3 {
  margin: -1.5rem -1.5rem 0 -1.5rem;
  font-size: 1.1rem;
  font-weight: 700;
  color: #fff;
  background:
    linear-gradient(
      to bottom,
      transparent 0px,
      transparent 20px,
      rgba(214, 96, 32, 0.5) 20px,
      rgba(214, 96, 32, 0.5) 24px,
      transparent 24px,
      transparent 28px,
      rgba(214, 96, 32, 0.5) 28px,
      rgba(214, 96, 32, 0.5) 32px,
      transparent 32px,
      transparent 36px,
      rgba(214, 96, 32, 0.5) 36px,
      rgba(214, 96, 32, 0.5) 40px,
      transparent 40px,
      transparent 44px,
      rgba(214, 96, 32, 0.5) 44px,
      rgba(214, 96, 32, 0.5) 48px,
      transparent 48px,
      transparent 100%
    ),
    #f4d03f;
  border: none;
  border-bottom: 2px solid #d66020;
  padding: 0.6rem 1.5rem;
  letter-spacing: 0.02em;
  text-align: center;
}

.bdsp-blending h3 > span {
  display: inline-block;
  background:
    linear-gradient(to right,
      rgba(0, 0, 0, 0.3) 0%,
      rgba(0, 0, 0, 0) 8%,
      rgba(0, 0, 0, 0) 92%,
      rgba(0, 0, 0, 0.3) 100%),
    linear-gradient(135deg, #e8793e 0%, #d86830 50%, #c05528 100%);
  border: 3px solid #6b2f0a;
  border-radius: 12px;
  padding: 0.6rem 1.5rem;
  text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.6);
  box-shadow:
    inset 0 2px 3px rgba(255, 255, 255, 0.15),
    inset 0 -2px 3px rgba(0, 0, 0, 0.4),
    0 2px 4px rgba(0, 0, 0, 0.2);
}

.bdsp-blending .blending-options {
  margin-top: 0.75rem;
}

.blending-options {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
  margin-bottom: 1rem;
  padding: 1rem;
  background: #fff7e8;
  border-radius: 10px;
  border: 2px solid #d66020;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
}

.option-row {
  display: flex;
  align-items: stretch;
  gap: 1rem;
  flex-wrap: wrap;
}

.option-group {
  display: flex;
  flex-direction: column;
  gap: 0.4rem;
}

.option-group.inline {
  flex-direction: row;
  align-items: center;
  gap: 0.6rem;
}

.option-group label {
  font-weight: 600;
  color: #212121;
  font-size: 0.85rem;
  white-space: nowrap;
}

.option-group select {
  padding: 0.5rem 0.75rem;
  border: 2px solid #d66020;
  border-radius: 4px;
  font-size: 0.85rem;
  background: #fff;
  cursor: pointer;
  min-width: 200px;
  transition: all 0.2s;
}

.option-group select:focus {
  outline: none;
  border-color: #d66020;
  box-shadow: 0 0 0 3px rgba(214, 96, 32, 0.1);
}

/* Player Buttons */
.player-buttons {
  display: flex;
  gap: 0.4rem;
}

.player-buttons button {
  padding: 0.4rem 0.75rem;
  background: #fffbf5;
  border: 2px solid #8b6914;
  border-radius: 8px;
  cursor: pointer;
  font-size: 0.85rem;
  font-weight: 700;
  color: #2d2d2d;
  transition: all 0.2s;
  min-width: 42px;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}

.player-buttons button:hover:not(.active) {
  background: #fff;
  box-shadow: 0 3px 6px rgba(0, 0, 0, 0.2);
  border-color: #b8461a;
  transform: translateY(-2px);
}

.player-buttons button.active {
  background: #fff;
  color: #d66020;
  border-color: #d66020;
  border-width: 3px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2), inset 0 1px 2px rgba(255, 255, 255, 0.5);
}

/* Option Checkboxes */
.option-checkbox {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  gap: 0.35rem;
  cursor: pointer;
  padding: 0.45rem 0.6rem;
  background: #fff7e8;
  border-radius: 12px;
  border: 1px solid #d66020;
  transition: all 0.2s;
  flex: 1;
  min-height: 46px;
  position: relative;
}

.option-checkbox:hover {
  background: #ffe6ca;
  box-shadow: 0 3px 6px rgba(0, 0, 0, 0.15);
  transform: translateY(-1px);
}

.option-checkbox:has(input:checked) {
  background: #ffd8b0;
  border-color: var(--berry-accent);
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.18), inset 0 1px 1px rgba(255, 255, 255, 0.5);
}

.option-checkbox input[type="checkbox"] {
  position: absolute;
  inset: 0;
  opacity: 0;
  cursor: pointer;
}

.option-checkbox .toggle-track {
  width: 54px;
  height: 26px;
  background: linear-gradient(180deg, #e5e2dd 0%, #cfc8c0 100%);
  border-radius: 999px;
  border: 2px solid var(--berry-accent);
  position: relative;
  box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.18);
  flex-shrink: 0;
}

.option-checkbox .toggle-thumb {
  position: absolute;
  top: 2px;
  left: 2px;
  width: 18px;
  height: 18px;
  background: linear-gradient(180deg, #fffdf8 0%, #ffd8b0 100%);
  border-radius: 50%;
  box-shadow:
    0 1px 2px rgba(0, 0, 0, 0.22),
    inset 0 1px 1px rgba(255, 255, 255, 0.7);
  transition: transform 0.2s ease, background 0.2s ease;
}

.option-checkbox input[type="checkbox"]:checked ~ .toggle-track .toggle-thumb {
  transform: translateX(26px);
  background: linear-gradient(180deg, #f6c48a 0%, #df8641 100%);
}

.option-checkbox .toggle-label {
  font-size: 0.9rem;
  color: #2d2d2d;
  font-weight: 700;
  line-height: 1.3;
}
}

/* Berry Kit Display */
.berry-kit {
  background: #fff7e8;
  padding: 1rem;
  border-radius: 10px;
  border: 2px solid #d66020;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
}

.berry-kit h4 {
  margin: 0 0 0.75rem 0;
  font-size: 1rem;
  font-weight: 700;
  color: #d66020;
}

.kit-blocks {
  display: flex;
  flex-direction: column;
  gap: 0.4rem;
  margin-bottom: 0.75rem;
}

.block-item {
  padding: 0.5rem 0.75rem;
  background: #fffbf5;
  border: 2px solid #d66020;
  border-radius: 10px;
  display: flex;
  gap: 0.75rem;
  align-items: center;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.04);
}

.berry-icon {
  width: 32px;
  height: 32px;
  object-fit: contain;
  flex-shrink: 0;
  image-rendering: pixelated;
}

.block-content {
  display: grid;
  grid-template-columns: 140px 1fr auto;
  gap: 1rem;
  align-items: center;
  flex: 1;
}

.block-name {
  font-size: 0.9rem;
  font-weight: 700;
  color: #d66020;
}

.block-berry {
  font-size: 0.85rem;
  font-weight: 500;
  color: #424242;
}

.block-meta {
  font-size: 0.8rem;
  font-weight: 600;
  color: #757575;
  white-space: nowrap;
}

.kit-stats {
  display: grid;
  grid-template-columns: 3fr 1fr;
  gap: 0.75rem;
  padding-top: 0.5rem;
  border-top: 1px solid #e0e0e0;
}

.stat-row {
  display: flex;
  align-items: center;
  gap: 0.35rem;
  font-size: 0.85rem;
  color: #000;
  flex-wrap: wrap;
  min-width: 0;
}

.stat-label {
  font-weight: 600;
  color: #212121;
  white-space: nowrap;
}

.stats {
  display: flex;
  flex-wrap: wrap;
  gap: 0.3rem;
  flex: 1;
  overflow-x: auto;
  padding-bottom: 0.15rem;
}

.stat {
  padding: 0.2rem 0.45rem;
  background: #f0f0f0;
  border-radius: 3px;
  font-size: 0.78rem;
  border: 1px solid #ddd;
  white-space: nowrap;
}

.stat.spicy { background: #ffe0e0; color: #c62828; }
.stat.dry { background: #e0f2ff; color: #0277bd; }
.stat.sweet { background: #fce4ec; color: #c2185b; }
.stat.bitter { background: #e8f5e9; color: #2e7d32; }
.stat.sour { background: #fff9c4; color: #f57f17; }
.stat.sheen { background: #e8ebff; color: #1e3a8a; border-color: #c7d2fe; }

.berry-blending .no-results {
  color: #424242;
  font-style: italic;
  margin: 0.75rem 0;
  font-size: 0.9rem;
  padding: 0.75rem;
  background: #fff7e8;
  border-left: 3px solid #d66020;
  border-radius: 10px;
  text-align: center;
}

/* Responsive */
@media (max-width: 768px) {
  .berry-blending {
    padding: 0.75rem;
  }

  .berry-mode-selector {
    flex-direction: column;
    border-bottom: none;
  }

  .berry-mode-selector .nav-arrow {
    display: none;
  }

  .berry-mode-selector button {
    top: 0;
    border: 2px solid #757575;
    border-radius: 4px;
  }

  .berry-mode-selector button.active {
    border: 2px solid #d66020;
  }

  .option-row {
    flex-direction: column;
    align-items: stretch;
    gap: 0.5rem;
  }

  .option-group.inline {
    flex-direction: column;
    align-items: stretch;
  }

  .option-group select {
    width: 100%;
  }

  .block-item {
    flex-direction: row;
    gap: 0.5rem;
  }

  .block-content {
    grid-template-columns: 1fr;
    gap: 0.3rem;
  }

  .block-name {
    font-weight: 700;
  }

  .kit-stats {
    grid-template-columns: 1fr;
  }

  .stat-label {
    min-width: auto;
  }
}

/* Focus styles for accessibility */
.berry-mode-selector button:focus-visible,
.berry-blending .player-buttons button:focus-visible,
.berry-blending .option-checkbox input:focus-visible,
.berry-blending select:focus-visible {
  outline: 3px solid #d66020;
  outline-offset: 2px;
}

/* ORAS Color Mapping */
.oras-blending h3 {
  margin: -1.5rem -1.5rem 0 -1.5rem;
  font-size: 1.1rem;
  font-weight: 700;
  color: #fff;
  background:
    linear-gradient(
      to bottom,
      transparent 0px,
      transparent 20px,
      rgba(214, 96, 32, 0.5) 20px,
      rgba(214, 96, 32, 0.5) 24px,
      transparent 24px,
      transparent 28px,
      rgba(214, 96, 32, 0.5) 28px,
      rgba(214, 96, 32, 0.5) 32px,
      transparent 32px,
      transparent 36px,
      rgba(214, 96, 32, 0.5) 36px,
      rgba(214, 96, 32, 0.5) 40px,
      transparent 40px,
      transparent 44px,
      rgba(214, 96, 32, 0.5) 44px,
      rgba(214, 96, 32, 0.5) 48px,
      transparent 48px,
      transparent 100%
    ),
    #f4d03f;
  border: none;
  border-bottom: 2px solid #d66020;
  padding: 0.6rem 1.5rem;
  letter-spacing: 0.02em;
  text-align: center;
}

.oras-blending h3 > span {
  display: inline-block;
  background:
    linear-gradient(to right,
      rgba(0, 0, 0, 0.3) 0%,
      rgba(0, 0, 0, 0) 8%,
      rgba(0, 0, 0, 0) 92%,
      rgba(0, 0, 0, 0.3) 100%),
    linear-gradient(135deg, #e8793e 0%, #d86830 50%, #c05528 100%);
  border: 3px solid #6b2f0a;
  border-radius: 12px;
  padding: 0.6rem 1.5rem;
  text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.6);
  box-shadow:
    inset 0 2px 3px rgba(255, 255, 255, 0.15),
    inset 0 -2px 3px rgba(0, 0, 0, 0.4),
    0 2px 4px rgba(0, 0, 0, 0.2);
}

.oras-blending .oras-info-card {
  margin-top: 0.75rem;
}

.oras-info-card {
  background: #fff7e8;
  padding: 1rem;
  border-radius: 10px;
  border: 2px solid #d66020;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
}

.oras-info-card p {
  color: #424242;
  font-size: 0.9rem;
  line-height: 1.5;
  margin: 0 0 1rem 0;
}

.oras-info-card p:last-child {
  margin-bottom: 0;
}

.color-mapping-list {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  max-width: 400px;
  margin: 0 auto 1rem auto;
}

.color-mapping-item {
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: 0.6rem 0.75rem;
  background: #fffbf5;
  border-radius: 10px;
  border: 2px solid #d66020;
}

.color-label {
  font-weight: 700;
  font-size: 0.9rem;
  padding: 0.3rem 0.75rem;
  border-radius: 3px;
  min-width: 80px;
  text-align: center;
}

.color-label.spicy {
  background: #ffe0e0;
  color: #c62828;
  border: 1px solid #c62828;
}

.color-label.dry {
  background: #e0f2ff;
  color: #0277bd;
  border: 1px solid #0277bd;
}

.color-label.sweet {
  background: #fce4ec;
  color: #c2185b;
  border: 1px solid #c2185b;
}

.color-label.bitter {
  background: #e8f5e9;
  color: #2e7d32;
  border: 1px solid #2e7d32;
}

.color-label.sour {
  background: #fff9c4;
  color: #f57f17;
  border: 1px solid #f57f17;
}

.flavor-label {
  font-size: 0.9rem;
  color: #424242;
  font-weight: 500;
}

.stat-label-name {
  font-size: 0.9rem;
  color: #212121;
  font-weight: 600;
  margin-left: auto;
}

/* BDSP Poffin Groups */
.bdsp-set-group-wrapper {
  display: flex;
  gap: 0.75rem;
  margin-bottom: 0.5rem;
}

.bdsp-set-label {
  display: flex;
  align-items: center;
  justify-content: center;
  writing-mode: vertical-rl;
  text-orientation: mixed;
  background: #d66020;
  color: #fff;
  font-weight: 700;
  font-size: 0.9rem;
  padding: 0.5rem;
  border-radius: 8px;
  white-space: nowrap;
  align-self: stretch;
}

.bdsp-set-items {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 0.4rem;
}

.bdsp-set-items .block-content {
  grid-template-columns: 140px 1fr;
}
